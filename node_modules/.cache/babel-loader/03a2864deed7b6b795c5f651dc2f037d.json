{"ast":null,"code":"var _jsxFileName = \"D:\\\\Shoaib\\\\react-chat\\\\src\\\\components\\\\Chat\\\\Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport \"./Chat.css\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chat(_ref) {\n  _s();\n\n  let {\n    user,\n    socket,\n    messages,\n    setMessages,\n    recieverId,\n    conversationId\n  } = _ref;\n  const [text, setText] = useState('');\n  const [media, setMedia] = useState([]);\n\n  const createMessage = () => {\n    //store the message in the database\n    axios.post('http://hypescreen.eu-4.evennode.com/messages/create', {\n      conversationId,\n      senderId: user._id,\n      recieverId: recieverId,\n      text: text && text,\n      media: media.length > 0 && media\n    }).then(res => {\n      //log the response\n      console.log(res.data); //fire the message event\n\n      socket.emit('message', { ...res.data\n      }); //add the new message to the current messages in the state\n\n      setMessages([...messages, res.data]);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const handleMedia = e => {\n    e.preventDefault(); //set the media files\n\n    setMedia(e.target.files);\n  };\n\n  const handleText = e => {\n    e.preventDefault();\n    setText(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat__container\",\n    children: [/*#__PURE__*/_jsxDEV(ScrollToBottom, {\n      className: \"messages__container\",\n      horizontal: true,\n      children: messages && messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: message.senderId === user._id ? 'message__container right !important' : 'message__container left',\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"message__text\",\n          children: message.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"message__date\",\n          children: new Date(message.createdAt).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this)]\n      }, message._id || message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create__chat__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"text__message\",\n        type: \"text\",\n        id: \"text\",\n        value: text,\n        onChange: handleText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"files__container\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"images\",\n          name: \"images\",\n          files: media,\n          onChange: handleMedia\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"send__message__btn\",\n        onClick: e => {\n          e.preventDefault();\n          createMessage();\n        },\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Chat, \"4Q6GyNcbqLkyUEUxjDsK3Vdl4NA=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","ScrollToBottom","axios","Chat","user","socket","messages","setMessages","recieverId","conversationId","text","setText","media","setMedia","createMessage","post","senderId","_id","length","then","res","console","log","data","emit","catch","err","handleMedia","e","preventDefault","target","files","handleText","value","map","message","Date","createdAt","toLocaleTimeString","id"],"sources":["D:/Shoaib/react-chat/src/components/Chat/Chat.jsx"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport \"./Chat.css\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nimport axios from 'axios';\r\n\r\n\r\nfunction Chat({user,socket,messages,setMessages,recieverId,conversationId}) {  \r\n  const [text, setText] = useState('');\r\n  const [media, setMedia] = useState([]);\r\n\r\n  const createMessage = () => {\r\n    //store the message in the database\r\n    axios.post('http://hypescreen.eu-4.evennode.com/messages/create', {\r\n      conversationId,\r\n      senderId: user._id,\r\n      recieverId: recieverId,\r\n      text: text && text,\r\n      media: media.length > 0 && media,\r\n    }).then((res) => {\r\n      //log the response\r\n      console.log(res.data);\r\n      //fire the message event\r\n      socket.emit('message', { ...res.data });\r\n      //add the new message to the current messages in the state\r\n      setMessages([...messages, res.data]);\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n \r\n  const handleMedia = (e) => {\r\n    e.preventDefault();\r\n    //set the media files\r\n    setMedia(e.target.files);\r\n  }\r\n  \r\n  const handleText = (e) => {\r\n    e.preventDefault();\r\n    setText(e.target.value);\r\n  }\r\n \r\n  \r\n  return (\r\n      <div className=\"chat__container\">\r\n          <ScrollToBottom className={\"messages__container\"} horizontal>\r\n        {\r\n          messages && messages.map((message) => (\r\n            <div className={message.senderId === user._id ? 'message__container right !important' : 'message__container left'} key={message._id || message.id}>\r\n              <h3 className='message__text'>{message.text}</h3>\r\n              <h6 className='message__date'>{new Date(message.createdAt).toLocaleTimeString()}</h6>\r\n            </div>\r\n          ))\r\n          }\r\n          </ScrollToBottom>\r\n          <div className='create__chat__container'>\r\n        <input className='text__message' type=\"text\" id='text' value={text} onChange={handleText} />\r\n        <div className='files__container'>\r\n          <input type=\"file\" id=\"images\" name='images' files={media}  onChange={handleMedia} />\r\n        </div>\r\n        <button className='send__message__btn' onClick={(e) => {\r\n          e.preventDefault();\r\n          createMessage();\r\n        }}>Send</button>\r\n          </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module"}